<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>networkedwebsitesdetector • networkedwebsitesdetector</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="networkedwebsitesdetector">
<meta property="og:description" content="networkedwebsitesdetector">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">networkedwebsitesdetector</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.1.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../articles/networkedwebsitesdetector.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/backup_restore.html">Backup and restore files</a>
    </li>
    <li>
      <a href="../articles/identifiers_excluded_by_default.html">Identifiers excluded by default</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/giocomai/networkedwebsitesdetector/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="networkedwebsitesdetector_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>networkedwebsitesdetector</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/giocomai/networkedwebsitesdetector/blob/master/vignettes/networkedwebsitesdetector.Rmd"><code>vignettes/networkedwebsitesdetector.Rmd</code></a></small>
      <div class="hidden name"><code>networkedwebsitesdetector.Rmd</code></div>

    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/giocomai/networkedwebsitesdetector">networkedwebsitesdetector</a></span><span class="op">)</span></code></pre></div>
<div id="getting-websites" class="section level1">
<h1 class="hasAnchor">
<a href="#getting-websites" class="anchor"></a>Getting websites</h1>
<p>In order to find networks of websites, we need to have a list of websites. If you have it, you can skip to the “Download homepages” section. Otherwise, here’s an approach to finding a list of websites, including (but not limited to) websites which talk about current events.</p>
<p>This approach is based on getting news headlines in a given language, finding the words that appear most often in the news in a given day, then look for them on Twitter, and extract domain names from links inlcuded in those tweets. This package includes a number of helper functions to streamline the process.</p>
<p>It is a very opinionated package, and will by default create folders, store things locally, and in ensuing steps process what is available, without demanding detailed paramater inputs from the user. The whole package is built assuming that the user will want to find networks of websites using a given language, but it makes it easy to replicate the same approach across languages.</p>
<p>The package includes a number of helper functions to compress, archive, and remotely back-up data on Google Drive. They will be presented in a separate vignette.</p>
<p>The whole process can be consistently repeated from a server. Details on how to set up a Docker image doing all the steps will also be presented in a separate vignette.</p>
<div id="getting-the-news" class="section level2">
<h2 class="hasAnchor">
<a href="#getting-the-news" class="anchor"></a>Getting the news</h2>
<p><code>nwd_get_emm_newsbrief</code> gets the current rss feed from a news aggregator, <a href="http://emm.newsbrief.eu/">EMM newsbrief</a>, and stores them in a local sub-folder according to a pre-defined scheme.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/nwd_get_emm_newsbrief.html">nwd_get_emm_newsbrief</a></span><span class="op">(</span>languages <span class="op">=</span> <span class="st">"it"</span><span class="op">)</span></code></pre></div>
<p>Timestamped files are stored in a subfolders by date, as follows, by default both in the original xml format and in a pre-processed data frame to be used more easily in R.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">fs</span><span class="fu">::</span><span class="fu"><a href="http://fs.r-lib.org/reference/dir_tree.html">dir_tree</a></span><span class="op">(</span>path <span class="op">=</span> <span class="st">"emm_newsbrief"</span><span class="op">)</span></code></pre></div>
<p>Having downloaded some news, it is possible to extract what were the most frequent keywords over a given period, such as a given date. Again, an helper function will remove relevant stopwords and output the words most frequently used over a given day, and store resulting data locally.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/nwd_extract_keywords.html">nwd_extract_keywords</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">fs</span><span class="fu">::</span><span class="fu"><a href="http://fs.r-lib.org/reference/dir_tree.html">dir_tree</a></span><span class="op">(</span>path <span class="op">=</span> <span class="st">"keywords"</span><span class="op">)</span></code></pre></div>
</div>
<div id="getting-inputs-from-twitter" class="section level2">
<h2 class="hasAnchor">
<a href="#getting-inputs-from-twitter" class="anchor"></a>Getting inputs from Twitter</h2>
<p>Once keywords are extracted, it is possible to look for them on Twitter. This assumes a valid Twitter token is part of the environment, as <a href="https://rtweet.info/articles/auth.html">detailed here</a>.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/nwd_get_tweets.html">nwd_get_tweets</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<p>Name of files include details about the exact query made to the Twitter api: first the term, then the language filter, then the number of tweets requested, the type of tweets requested (can be “recent”, “mixed”, or “popular”), and the exact timing of the request.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">fs</span><span class="fu">::</span><span class="fu"><a href="http://fs.r-lib.org/reference/dir_tree.html">dir_tree</a></span><span class="op">(</span>path <span class="op">=</span> <span class="st">"tweets"</span><span class="op">)</span></code></pre></div>
</div>
<div id="extracting-links-and-domains" class="section level2">
<h2 class="hasAnchor">
<a href="#extracting-links-and-domains" class="anchor"></a>Extracting links and domains</h2>
<p>Now, it’s time to get links out of tweets. URLs shortened not only by Twitter, but also by third parties such as bit.ly, are expanded by default. Expanding URLs can be time consuming, so keep this in mind as you plan activities.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="fu">nwd_extract_urls</span><span class="op">(</span><span class="op">)</span>
    </code></pre></div>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">fs</span><span class="fu">::</span><span class="fu"><a href="http://fs.r-lib.org/reference/dir_tree.html">dir_tree</a></span><span class="op">(</span>path <span class="op">=</span> <span class="st">"tweet_links"</span><span class="op">)</span></code></pre></div>
<p>It would now be possible to download links, or at least the most common among them, as the number of unique links grows very quickly. As a first step, it may however make sense to extract only the homepage for each of the links found so far.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/nwd_extract_domains.html">nwd_extract_domains</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
</div>
</div>
<div id="download-homepages" class="section level1">
<h1 class="hasAnchor">
<a href="#download-homepages" class="anchor"></a>Download homepages</h1>
<p>Based on the domain names extracted from links included in tweets as details above, it is now possible to download home pages. Of course, if you already have a list of domains you wish to download, you can skip all previous steps and start with <code><a href="../reference/nwd_get_homepage.html">nwd_get_homepage()</a></code>.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">domains</span> <span class="op">&lt;-</span> <span class="fu">purrr</span><span class="fu">::</span><span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html">map_dfr</a></span><span class="op">(</span>.x <span class="op">=</span> <span class="fu">fs</span><span class="fu">::</span><span class="fu"><a href="http://fs.r-lib.org/reference/dir_ls.html">dir_ls</a></span><span class="op">(</span>path <span class="op">=</span> <span class="fu">fs</span><span class="fu">::</span><span class="fu"><a href="http://fs.r-lib.org/reference/path.html">path</a></span><span class="op">(</span><span class="st">"domains"</span>, <span class="st">"it"</span><span class="op">)</span><span class="op">)</span>, .f <span class="op">=</span> <span class="va">readRDS</span><span class="op">)</span>

<span class="fu"><a href="../reference/nwd_get_homepage.html">nwd_get_homepage</a></span><span class="op">(</span>domain <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/unique.html">unique</a></span><span class="op">(</span><span class="va">domains</span><span class="op">$</span><span class="va">domain</span><span class="op">)</span>, language <span class="op">=</span> <span class="st">"it"</span><span class="op">)</span></code></pre></div>
<p><code><a href="../reference/nwd_get_homepage.html">nwd_get_homepage()</a></code> downloads homepages in html format in a dedicated, dated subfolder. By default, it does not download again a file if has been already downloaded in the last three months. This can be customised by setting the <code>since</code> parameter, e.g. <code><a href="../reference/nwd_get_homepage.html">nwd_get_homepage(domain = unique(domains$domain), language = "it", since = Sys.Date()-31)</a></code>.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/nwd_clean_files.html">nwd_clean_files</a></span><span class="op">(</span>remove_exceeding <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
</div>
<div id="extract-identifiers" class="section level1">
<h1 class="hasAnchor">
<a href="#extract-identifiers" class="anchor"></a>Extract identifiers</h1>
<p>The following function will extract identifiers such as Google Analytics and Google Adwords id, and store them in a dated folder.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/nwd_extract_identifiers.html">nwd_extract_identifiers</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
</div>
<div id="find-networks" class="section level1">
<h1 class="hasAnchor">
<a href="#find-networks" class="anchor"></a>Find networks</h1>
<p>Once identifiers have been extracted, it is finally possible to find networks. A table in the long format including all identifiers can be retrieved with the following command:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/nwd_load_identifiers_df.html">nwd_load_identifiers_df</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<p>If you wish to include an additional column showing which networks share the same id, there is a dedicated function for that:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/nwd_add_network_id.html">nwd_add_network_id</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<p>Both of these by default store the output in a dedicated subfolder, in order to limit re-processing of the same data, as these are steps that can easily take hours of computing time.</p>
<p>If you wish to find out about the network of a specific domain, you can use the following command:</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/nwd_find_network.html">nwd_find_network</a></span><span class="op">(</span><span class="op">)</span>

<span class="fu"><a href="../reference/nwd_show_network.html">nwd_show_network</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<p>If youy prefer a visual output, this command will create the relevant graph:</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Giorgio Comai.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.9000.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
